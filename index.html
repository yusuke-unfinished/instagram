<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Algorithm Decoder 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #fafafa; /* Instagram Light Gray */
            color: #262626;
        }
        .gradient-text {
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .gradient-bg {
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }
        .card {
            background: white;
            border: 1px solid #dbdbdb;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .interactive-btn {
            transition: all 0.2s;
        }
        .interactive-btn:active {
            transform: scale(0.95);
        }
        /* Chart Container Styling - Mandatory */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 640px) {
            .chart-container {
                height: 300px;
            }
        }
        .funnel-step {
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .funnel-hidden {
            opacity: 0.3;
            transform: scale(0.95);
            filter: grayscale(100%);
        }
        .funnel-active {
            opacity: 1;
            transform: scale(1);
            filter: grayscale(0%);
            border-color: #e1306c;
            background-color: #fff0f5;
        }
    </style>
    <!-- Chosen Palette: Instagram Modern (White, Light Gray #fafafa, Dark Gray #262626, Brand Gradient for Accents) -->
    <!-- Application Structure Plan: 
         1. Hero: Overview of the major "Distribution" update.
         2. Algorithm Signal Comparator: Tabbed interface updating a Radar Chart to show weighting differences (Reels vs Stories vs Feed).
         3. The Viral Funnel: Vertical step-by-step interactive flow showing the new "Small Creator" recommendation path.
         4. Metric Calculator: A simple input tool emphasizing the value of "Shares/Sends" over "Likes".
         5. SEO & Originality Checklist: Interactive list for actionable takeaways.
         Why: Breaks down complex "black box" logic into isolated, interactive experiments for better understanding.
    -->
    <!-- Visualization & Content Choices:
         - Radar Chart: Best for comparing multivariate data (ranking signals) across categories (formats).
         - Interactive List (Funnel): Simulates the sequential nature of algorithmic distribution.
         - Bar Chart (in Calculator): Visualizes the disproportionate impact of different engagement types.
         - NO SVG/Mermaid: All visuals built with HTML/CSS or Chart.js.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Navigation / Header -->
    <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold tracking-tight">Instagram<span class="gradient-text">AlgoDecoder</span> 2025</h1>
            <div class="text-xs font-medium bg-gray-100 px-2 py-1 rounded text-gray-500">Latest Research Update</div>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto px-4 py-8 space-y-12">

        <!-- Section 1: Introduction -->
        <header class="text-center space-y-4 max-w-3xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯<br><span class="gradient-text">ã€Œç™ºè¦‹ã€ã¨ã€Œå¯¾è©±ã€</span>ã¸</h2>
            <p class="text-gray-600 leading-relaxed text-lg">
                2024å¹´å¾ŒåŠã‹ã‚‰2025å¹´ã«ã‹ã‘ã¦ã€Instagramã¯æ ¹æœ¬çš„ãªå¤‰æ›´ã‚’è¡Œã„ã¾ã—ãŸã€‚
                æœ€å¤§ã®ãƒ†ãƒ¼ãƒã¯<strong>ã€Œã‚ªãƒªã‚¸ãƒŠãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å„ªé‡ã€</strong>ã¨<strong>ã€ŒSendsï¼ˆã‚·ã‚§ã‚¢ï¼‰ã®é‡è¦æ€§ã€</strong>ã§ã™ã€‚
                ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã«é–¢ä¿‚ãªãã€é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè©•ä¾¡ã•ã‚Œã‚‹æ–°ã—ã„ä»•çµ„ã¿ã‚’è§£ãæ˜ã‹ã—ã¾ã—ã‚‡ã†ã€‚
            </p>
        </header>

        <!-- Section 2: Ranking Signal Analyzer (Radar Chart) -->
        <section class="card p-6 md:p-8">
            <div class="mb-6">
                <h3 class="text-2xl font-bold mb-2">ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆåˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚°ãƒŠãƒ«</h3>
                <p class="text-gray-600 text-sm">
                    Reelsã€Storiesã€ãƒ•ã‚£ãƒ¼ãƒ‰æŠ•ç¨¿ã§ã¯ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒé‡è¦–ã™ã‚‹æŒ‡æ¨™ï¼ˆã‚·ã‚°ãƒŠãƒ«ï¼‰ãŒå…¨ãç•°ãªã‚Šã¾ã™ã€‚
                    ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã€ãã‚Œãã‚Œã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã€Œä½•ãŒé‡è¦ã‹ã€ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
                </p>
            </div>

            <div class="flex flex-col md:flex-row gap-8 items-center">
                <!-- Controls -->
                <div class="w-full md:w-1/3 space-y-3">
                    <button onclick="updateChart('reels')" id="btn-reels" class="interactive-btn w-full text-left px-4 py-3 rounded-lg border-2 border-transparent bg-gray-50 hover:bg-gray-100 font-bold focus:outline-none ring-offset-2 focus:ring-2 focus:ring-pink-500 transition-colors active-mode">
                        ğŸ¬ Reels (ãƒªãƒ¼ãƒ«)
                        <span class="block text-xs font-normal text-gray-500 mt-1">æ–°ãŸãªè¦–è´è€…ã¸ã®ãƒªãƒ¼ãƒã«æœ€é©</span>
                    </button>
                    <button onclick="updateChart('stories')" id="btn-stories" class="interactive-btn w-full text-left px-4 py-3 rounded-lg border-2 border-transparent bg-gray-50 hover:bg-gray-100 font-bold focus:outline-none ring-offset-2 focus:ring-2 focus:ring-pink-500 transition-colors">
                        â­• Stories (ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚º)
                        <span class="block text-xs font-normal text-gray-500 mt-1">æ—¢å­˜ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã¨ã®è¦ªå¯†åº¦</span>
                    </button>
                    <button onclick="updateChart('feed')" id="btn-feed" class="interactive-btn w-full text-left px-4 py-3 rounded-lg border-2 border-transparent bg-gray-50 hover:bg-gray-100 font-bold focus:outline-none ring-offset-2 focus:ring-2 focus:ring-pink-500 transition-colors">
                        ğŸ–¼ï¸ Feed (ãƒ•ã‚£ãƒ¼ãƒ‰)
                        <span class="block text-xs font-normal text-gray-500 mt-1">ãƒãƒ©ãƒ³ã‚¹å‹ãƒ»æƒ…å ±ä¿å­˜</span>
                    </button>
                    
                    <div id="signal-explanation" class="mt-6 p-4 bg-blue-50 text-blue-800 rounded-md text-sm border-l-4 border-blue-500">
                        <!-- Dynamic explanation will appear here -->
                    </div>
                </div>

                <!-- Radar Chart -->
                <div class="w-full md:w-2/3 flex justify-center">
                    <div class="chart-container">
                        <canvas id="signalChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: The New Distribution Funnel -->
        <section class="grid md:grid-cols-2 gap-8 items-start">
            <div>
                <h3 class="text-2xl font-bold mb-4">æ–°ã—ã„ã€Œãƒªãƒ¼ãƒæ‹¡å¤§ã€ã®ä»•çµ„ã¿</h3>
                <p class="text-gray-600 mb-6">
                    ä»¥å‰ã¯ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ãŒå¤šã„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒåœ§å€’çš„ã«æœ‰åˆ©ã§ã—ãŸã€‚ã—ã‹ã—æœ€æ–°ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã¯ã€
                    <strong>ã€Œã™ã¹ã¦ã®æŠ•ç¨¿ãŒã€ã¾ãšã¯å°‘æ•°ã®éãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã‚’å«ã‚€ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹ã§ãƒ†ã‚¹ãƒˆã•ã‚Œã‚‹ã€</strong>ä»•çµ„ã¿ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚
                    ã“ã‚Œã«ã‚ˆã‚Šã€å°è¦æ¨¡ãªã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè‰¯ã‘ã‚Œã°ãƒã‚ºã‚‹ãƒãƒ£ãƒ³ã‚¹ãŒå‡ç­‰åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚
                </p>
                
                <div class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg mb-6">
                    <h4 class="font-bold text-yellow-800 text-sm mb-1">ğŸ’¡ é‡è¦ãªå¤‰æ›´ç‚¹</h4>
                    <p class="text-yellow-900 text-sm">
                        ã‚¢ã‚°ãƒªã‚²ãƒ¼ã‚¿ãƒ¼ï¼ˆä»–äººã®è»¢è¼‰ï¼‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯æ¨å¥¨ã‹ã‚‰é™¤å¤–ã•ã‚Œã€ã‚ªãƒªã‚¸ãƒŠãƒ«ä½œæˆè€…ãŒå„ªå…ˆçš„ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
                    </p>
                </div>

                <div class="space-y-2">
                    <p class="font-bold text-gray-700">ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³:</p>
                    <button onclick="setFunnelStep(1)" class="w-full text-left px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm font-medium">Step 1: æŠ•ç¨¿ç›´å¾Œ</button>
                    <button onclick="setFunnelStep(2)" class="w-full text-left px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm font-medium">Step 2: ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ</button>
                    <button onclick="setFunnelStep(3)" class="w-full text-left px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm font-medium">Step 3: é¡ä¼¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸æ‹¡å¤§</button>
                    <button onclick="setFunnelStep(4)" class="w-full text-left px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded text-sm font-medium">Step 4: ãƒã‚¤ãƒ©ãƒ«ï¼ˆç™ºè¦‹ã‚¿ãƒ–ï¼‰</button>
                </div>
            </div>

            <!-- Interactive Funnel Visual -->
            <div class="bg-gray-900 text-white p-6 rounded-xl relative overflow-hidden min-h-[400px] flex flex-col justify-center">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-600"></div>
                
                <!-- Funnel Step 1 -->
                <div id="f-step-1" class="funnel-step border-l-4 border-gray-600 pl-4 py-2 mb-4 funnel-active">
                    <div class="text-xs text-gray-400 uppercase tracking-widest">Initial Phase</div>
                    <div class="text-xl font-bold text-white">ã‚¹ãƒ¢ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ</div>
                    <p class="text-sm text-gray-300 mt-1">ã‚ãªãŸã®æŠ•ç¨¿ã¯ã¾ãšã€ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã®ä¸€éƒ¨ã¨ã€ã‚ãªãŸã«èˆˆå‘³ãŒã‚ã‚Šãã†ãªå°‘æ•°ã®éãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                </div>

                <!-- Funnel Step 2 -->
                <div id="f-step-2" class="funnel-step border-l-4 border-gray-600 pl-4 py-2 mb-4 funnel-hidden">
                    <div class="text-xs text-gray-400 uppercase tracking-widest">Signal Check</div>
                    <div class="text-xl font-bold text-white">ã‚·ã‚°ãƒŠãƒ«åˆ¤å®š</div>
                    <p class="text-sm text-gray-300 mt-1">ã€Œè¦–è´å®Œäº†ç‡ã€ã¨ã€ŒSendsï¼ˆã‚·ã‚§ã‚¢ï¼‰ã€ãŒç‰¹ã«é‡è¦–ã•ã‚Œã¾ã™ã€‚ã€Œã„ã„ã­ã€ã ã‘ã§ã¯ä¸ååˆ†ã§ã™ã€‚</p>
                </div>

                <!-- Funnel Step 3 -->
                <div id="f-step-3" class="funnel-step border-l-4 border-gray-600 pl-4 py-2 mb-4 funnel-hidden">
                    <div class="text-xs text-gray-400 uppercase tracking-widest">Expansion</div>
                    <div class="text-xl font-bold text-white">ãƒªãƒ¼ãƒæ‹¡å¤§</div>
                    <p class="text-sm text-gray-300 mt-1">ã‚·ã‚°ãƒŠãƒ«ãŒè‰¯å¥½ãªå ´åˆã€ã‚ˆã‚Šåºƒã„é¡ä¼¼ã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹ã¸é…ä¿¡ã•ã‚Œã¾ã™ã€‚ã“ã“ã§ã‚ªãƒªã‚¸ãƒŠãƒ«ã‹ã©ã†ã‹ãŒå³ã—ãåˆ¤å®šã•ã‚Œã¾ã™ã€‚</p>
                </div>

                <!-- Funnel Step 4 -->
                <div id="f-step-4" class="funnel-step border-l-4 border-gray-600 pl-4 py-2 mb-4 funnel-hidden">
                    <div class="text-xs text-gray-400 uppercase tracking-widest">Viral</div>
                    <div class="text-xl font-bold text-white">ãƒˆãƒƒãƒ—è¡¨ç¤º</div>
                    <p class="text-sm text-gray-300 mt-1">ç™ºè¦‹ã‚¿ãƒ–ã®ä¸Šä½ã‚„Reelsã‚¿ãƒ–ã®ãŠã™ã™ã‚ã«é•·æ™‚é–“æ²è¼‰ã•ã‚Œã€ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼å¤–ã‹ã‚‰ã®æµå…¥ãŒçˆ†ç™ºã—ã¾ã™ã€‚</p>
                </div>
            </div>
        </section>

        <!-- Section 4: Engagement Value Calculator -->
        <section class="card p-6 md:p-8">
            <h3 class="text-2xl font-bold mb-4">ã€ŒSendsï¼ˆã‚·ã‚§ã‚¢ï¼‰ã€ã¯æ–°ã—ã„ã€Œã„ã„ã­ã€</h3>
            <p class="text-gray-600 mb-6">
                Instagramã®è²¬ä»»è€…Adam Mosseriæ°ã¯ã€ŒSendsï¼ˆDMã§ã®ã‚·ã‚§ã‚¢ï¼‰ã¯ãƒªãƒ¼ãƒã«ãŠã‘ã‚‹æœ€ã‚‚é‡è¦ãªæŒ‡æ¨™ã®ä¸€ã¤ã€ã¨æ˜è¨€ã—ã¦ã„ã¾ã™ã€‚
                ä»¥ä¸‹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®é•ã„ãŒã©ã‚Œã ã‘ã€Œæ¨å®šãƒªãƒ¼ãƒã‚¹ã‚³ã‚¢ã€ã«å½±éŸ¿ã™ã‚‹ã‹è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
            </p>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">â¤ï¸ ã„ã„ã­æ•° (Likes)</label>
                        <input type="range" id="input-likes" min="0" max="1000" value="100" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pink-600">
                        <div class="text-right text-sm font-bold text-pink-600" id="val-likes">100</div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆæ•° (Comments)</label>
                        <input type="range" id="input-comments" min="0" max="200" value="10" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600">
                        <div class="text-right text-sm font-bold text-purple-600" id="val-comments">10</div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ’¾ ä¿å­˜æ•° (Saves)</label>
                        <input type="range" id="input-saves" min="0" max="200" value="20" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-orange-500">
                        <div class="text-right text-sm font-bold text-orange-500" id="val-saves">20</div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ğŸš€ ã‚·ã‚§ã‚¢æ•° (Sends) <span class="bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded ml-2">é‡è¦</span></label>
                        <input type="range" id="input-shares" min="0" max="200" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                        <div class="text-right text-sm font-bold text-blue-600" id="val-shares">5</div>
                    </div>
                </div>

                <div class="bg-gray-50 rounded-lg p-6 flex flex-col justify-center items-center text-center">
                    <div class="text-sm text-gray-500 mb-2">æ¨å®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚¹ã‚³ã‚¢</div>
                    <div class="text-5xl font-black gradient-text mb-4" id="total-score">0</div>
                    <p class="text-xs text-gray-400">â€»ã“ã®ã‚¹ã‚³ã‚¢ã¯ã€å…¬å¼ç™ºè¡¨ã¨ãƒªã‚µãƒ¼ãƒã«åŸºã¥ã„ãŸç‹¬è‡ªã®é‡ã¿ä»˜ã‘ã«ã‚ˆã‚‹æ¨å®šå€¤ã§ã™ã€‚</p>
                    
                    <div class="mt-6 w-full space-y-2">
                        <div class="flex justify-between text-xs text-gray-600">
                            <span>Like Contribution</span>
                            <span id="pct-likes">0%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-1.5">
                            <div id="bar-likes" class="bg-pink-500 h-1.5 rounded-full" style="width: 0%"></div>
                        </div>

                        <div class="flex justify-between text-xs text-gray-600 pt-2">
                            <span>Share Contribution</span>
                            <span id="pct-shares">0%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-1.5">
                            <div id="bar-shares" class="bg-blue-600 h-1.5 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Actionable Checklist -->
        <section>
            <h3 class="text-2xl font-bold mb-6">2025å¹´ç‰ˆ æŠ•ç¨¿æœ€é©åŒ–ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h3>
            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Checklist Items generated by JS -->
                <div id="checklist-container" class="contents">
                    <!-- Items inserted here -->
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-100 border-t border-gray-200 mt-12 py-8 text-center">
        <p class="text-gray-500 text-sm">&copy; 2025 Instagram Algorithm Decoder. Based on latest Meta announcements & analysis.</p>
    </footer>

    <script>
        // --- DATA & STATE ---

        // 1. Radar Chart Data
        // Weights based on general consensus of 2024/2025 algorithm behavior
        const algorithmData = {
            reels: {
                label: 'Reels (ãƒªãƒ¼ãƒ«)',
                data: [90, 85, 30, 40, 95], // [Watch Time, Shares, Comments, Likes, Audio/Visual Quality]
                desc: 'Reelsã¯ã€Œã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ³ãƒ¡ãƒ³ãƒˆã€ã§ã™ã€‚æœ€å¾Œã¾ã§è¦‹ã‚‰ã‚Œã‚‹ã“ã¨(å®Œäº†ç‡)ã¨ã€å‹é”ã«ã‚·ã‚§ã‚¢ã•ã‚Œã‚‹ã“ã¨(Sends)ãŒçˆ†ç™ºçš„ãªæ‹¡æ•£ã®éµã§ã™ã€‚'
            },
            stories: {
                label: 'Stories (ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚º)',
                data: [40, 50, 60, 50, 90], // [Watch Time, Shares, Comments, Likes, Relationship/Closeness]
                // Note: The 5th axis label will change slightly in context, but using fixed axes for chart
                desc: 'Storiesã¯ã€Œè¦ªå¯†åº¦ã€ã§ã™ã€‚DMã§ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚„ã€ç‰¹å®šã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®é–¢å¿ƒã®é«˜ã•ï¼ˆClosenessï¼‰ãŒæœ€å„ªå…ˆã•ã‚Œã¾ã™ã€‚'
            },
            feed: {
                label: 'Feed (ãƒ•ã‚£ãƒ¼ãƒ‰)',
                data: [60, 70, 80, 60, 50],
                desc: 'ãƒ•ã‚£ãƒ¼ãƒ‰ã¯ã€Œç·åˆåŠ›ã€ã§ã™ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹å¯¾è©±ã€ä¿å­˜ã«ã‚ˆã‚‹è¦‹è¿”ã—ã€ãã—ã¦ã‚·ã‚§ã‚¢ã€‚æ»åœ¨æ™‚é–“ã‚‚é‡è¦ãªè¦ç´ ã§ã™ã€‚'
            }
        };

        const signalLabels = ['æ»åœ¨æ™‚é–“ (Watch Time)', 'ã‚·ã‚§ã‚¢ (Sends)', 'ã‚³ãƒ¡ãƒ³ãƒˆ (Comms)', 'ã„ã„ã­ (Likes)', 'é–¢ä¿‚æ€§/å“è³ª (Signals)'];

        // 2. Checklist Data
        const checklistItems = [
            { title: "SEOã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰", desc: "ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ã¨ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã«æ¤œç´¢ã•ã‚Œã‚„ã™ã„å˜èªã‚’å…¥ã‚ŒãŸã‹ï¼Ÿ", icon: "ğŸ”" },
            { title: "é€ã‹ã—ãªã—", desc: "TikTokãªã©ã®ãƒ­ã‚´ãŒå…¥ã£ã¦ã„ãªã„ã‚ªãƒªã‚¸ãƒŠãƒ«å‹•ç”»ã‹ï¼Ÿ", icon: "ğŸš«" },
            { title: "æœ€åˆã®3ç§’", desc: "è¦–è´è€…ã‚’æ­¢ã‚ã‚‹ãƒ•ãƒƒã‚¯ï¼ˆè¦–è¦šãƒ»è´è¦šï¼‰ãŒã‚ã‚‹ã‹ï¼Ÿ", icon: "âš¡" },
            { title: "CTA (ã‚·ã‚§ã‚¢)", desc: "ã€Œå‹é”ã«é€ã£ã¦ã­ã€ãªã©ã‚·ã‚§ã‚¢ã‚’ä¿ƒã™å‹•ç·šãŒã‚ã‚‹ã‹ï¼Ÿ", icon: "ğŸ“¤" },
            { title: "90ç§’ä»¥å†…", desc: "Reelsã®å ´åˆã€å®Œäº†ç‡ã‚’é«˜ã‚ã‚‹ãŸã‚ã«é•·ã™ããªã„ã‹ï¼Ÿ", icon: "â±ï¸" },
            { title: "é«˜ç”»è³ª", desc: "ã¼ã‚„ã‘ã¦ã„ãªã„ã‹ï¼ŸAIã«ã‚ˆã‚‹ä½è©•ä¾¡ã‚’é¿ã‘ã‚‹ãŸã‚å¿…é ˆã€‚", icon: "âœ¨" }
        ];

        // --- CHART INITIALIZATION ---
        
        let radarChart;

        function initChart() {
            const ctx = document.getElementById('signalChart').getContext('2d');
            
            // Initial Data: Reels
            const initData = algorithmData.reels;

            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: signalLabels,
                    datasets: [{
                        label: initData.label,
                        data: initData.data,
                        backgroundColor: 'rgba(225, 48, 108, 0.2)', // Instagram Pink transparent
                        borderColor: 'rgba(225, 48, 108, 1)',
                        pointBackgroundColor: 'rgba(225, 48, 108, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(225, 48, 108, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#dbdbdb' },
                            grid: { color: '#dbdbdb' },
                            pointLabels: {
                                font: { size: 12, family: "'Noto Sans JP', sans-serif", weight: 'bold' },
                                color: '#262626'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: { display: false } // Hide numbers for cleaner look
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ": " + context.raw + "/100 é‡è¦åº¦";
                                }
                            }
                        }
                    }
                }
            });

            // Set initial description and button state
            document.getElementById('signal-explanation').textContent = initData.desc;
            document.getElementById('btn-reels').classList.add('ring-2', 'ring-pink-500', 'bg-gray-100');
        }

        // --- INTERACTION LOGIC ---

        // 1. Chart Update
        window.updateChart = function(type) {
            const data = algorithmData[type];
            
            // Update Chart Data
            radarChart.data.datasets[0].label = data.label;
            radarChart.data.datasets[0].data = data.data;
            
            // Color variations
            let color = '225, 48, 108'; // Default Pink
            if (type === 'stories') color = '240, 148, 51'; // Orange
            if (type === 'feed') color = '88, 81, 219'; // Purple

            radarChart.data.datasets[0].backgroundColor = `rgba(${color}, 0.2)`;
            radarChart.data.datasets[0].borderColor = `rgba(${color}, 1)`;
            radarChart.data.datasets[0].pointBackgroundColor = `rgba(${color}, 1)`;
            radarChart.update();

            // Update Text
            const expBox = document.getElementById('signal-explanation');
            expBox.style.opacity = 0;
            setTimeout(() => {
                expBox.textContent = data.desc;
                // Update border color of explanation box
                expBox.className = `mt-6 p-4 bg-gray-50 text-gray-800 rounded-md text-sm border-l-4 border-[rgb(${color})]`;
                expBox.style.opacity = 1;
            }, 200);

            // Update Buttons
            ['reels', 'stories', 'feed'].forEach(t => {
                const btn = document.getElementById(`btn-${t}`);
                if (t === type) {
                    btn.classList.add('ring-2', 'ring-pink-500', 'bg-gray-100');
                } else {
                    btn.classList.remove('ring-2', 'ring-pink-500', 'bg-gray-100');
                }
            });
        };

        // 2. Funnel Logic
        window.setFunnelStep = function(stepNum) {
            // Reset all
            for (let i = 1; i <= 4; i++) {
                const el = document.getElementById(`f-step-${i}`);
                if (i === stepNum) {
                    el.classList.remove('funnel-hidden');
                    el.classList.add('funnel-active', 'border-pink-500', 'bg-white/10');
                } else if (i < stepNum) {
                    // Previous steps visible but dim
                    el.classList.remove('funnel-hidden', 'funnel-active', 'border-pink-500', 'bg-white/10');
                    el.classList.add('opacity-50', 'border-gray-600');
                } else {
                    // Future steps hidden
                    el.classList.remove('funnel-active', 'border-pink-500', 'bg-white/10');
                    el.classList.add('funnel-hidden', 'border-gray-600');
                }
            }
        };

        // 3. Calculator Logic
        function calculateScore() {
            const likes = parseInt(document.getElementById('input-likes').value);
            const comments = parseInt(document.getElementById('input-comments').value);
            const saves = parseInt(document.getElementById('input-saves').value);
            const shares = parseInt(document.getElementById('input-shares').value);

            // Update display numbers
            document.getElementById('val-likes').textContent = likes;
            document.getElementById('val-comments').textContent = comments;
            document.getElementById('val-saves').textContent = saves;
            document.getElementById('val-shares').textContent = shares;

            // Estimated Weighting (Based on 2025 "Sends" priority)
            // Share = 10 pts, Save = 5 pts, Comment = 3 pts, Like = 1 pt
            const wLike = 1;
            const wComm = 3;
            const wSave = 5;
            const wShare = 12; // Heavily weighted

            const score = (likes * wLike) + (comments * wComm) + (saves * wSave) + (shares * wShare);
            const maxScore = (1000 * wLike) + (200 * wComm) + (200 * wSave) + (200 * wShare); // Rough max for bar calc

            // Animation for score
            const scoreEl = document.getElementById('total-score');
            scoreEl.textContent = score.toLocaleString();

            // Calculate contribution percentages for visualization
            const totalWeighted = score || 1;
            const likeContrib = Math.round(((likes * wLike) / totalWeighted) * 100);
            const shareContrib = Math.round(((shares * wShare) / totalWeighted) * 100);

            document.getElementById('pct-likes').textContent = likeContrib + '%';
            document.getElementById('bar-likes').style.width = likeContrib + '%';
            
            document.getElementById('pct-shares').textContent = shareContrib + '%';
            document.getElementById('bar-shares').style.width = shareContrib + '%';
        }

        // Add listeners to inputs
        ['input-likes', 'input-comments', 'input-saves', 'input-shares'].forEach(id => {
            document.getElementById(id).addEventListener('input', calculateScore);
        });

        // 4. Populate Checklist
        function renderChecklist() {
            const container = document.getElementById('checklist-container');
            checklistItems.forEach(item => {
                const div = document.createElement('div');
                div.className = "bg-white p-4 rounded-lg border border-gray-200 shadow-sm cursor-pointer hover:border-pink-400 transition-colors";
                div.onclick = function() {
                    const icon = this.querySelector('.check-icon');
                    if (icon.textContent === 'â¬œ') {
                        icon.textContent = 'âœ…';
                        this.classList.add('bg-green-50', 'border-green-300');
                    } else {
                        icon.textContent = 'â¬œ';
                        this.classList.remove('bg-green-50', 'border-green-300');
                    }
                };
                div.innerHTML = `
                    <div class="flex items-start justify-between mb-2">
                        <span class="text-2xl">${item.icon}</span>
                        <span class="check-icon text-xl text-gray-300">â¬œ</span>
                    </div>
                    <h4 class="font-bold text-gray-800">${item.title}</h4>
                    <p class="text-xs text-gray-500 mt-1">${item.desc}</p>
                `;
                container.appendChild(div);
            });
        }

        // --- INIT ---
        window.addEventListener('DOMContentLoaded', () => {
            initChart();
            renderChecklist();
            calculateScore(); // Run once to set initial state
            setFunnelStep(1); // Set initial funnel step
        });

    </script>
</body>
</html>
